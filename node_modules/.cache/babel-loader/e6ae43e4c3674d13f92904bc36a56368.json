{"ast":null,"code":"var _jsxFileName = \"D:\\\\python\\\\virtusa_frontend\\\\src\\\\upload.js\";\nimport React, { useState } from 'react';\nimport IconLabelButtons from \"./uploadicon\";\nimport CSVReader from \"react-csv-reader\";\nimport Box from \"@material-ui/core/Box\";\nimport { createStyles, makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport CircularIndeterminate from \"./circularprogressive\";\nconst useStyles = makeStyles(theme => createStyles({\n  head: {\n    border: \"2px solid blue\",\n    min: \"10ch\",\n    backgroundColor: \"#ffffff\",\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginLeft: \"20%\",\n    shadowBlur: \"#2224FF\",\n    marginTop: \"10%\",\n    marginBottom: \"5%\",\n    marginRight: \"20%\",\n    borderRadius: 20,\n    padding: 30\n  }\n}));\n\nfunction Upload() {\n  const classes = useStyles();\n  const [result, setResult] = useState(\"enabled\");\n  const [value, setValue] = useState('Upload or drag and drop csv file here');\n  const [csvdata, setCSV] = useState('');\n  const [filename, setFile] = useState('');\n  const [open, setOpen] = React.useState(\"close\");\n\n  const handleForce = (data, fileInfo) => (setCSV(data), setFile(fileInfo));\n\n  const papaparseOptions = {\n    header: true,\n    dynamicTyping: true,\n    skipEmptyLines: true,\n    transformHeader: header => header.toLowerCase().replace(/\\W/g, \"_\")\n  };\n\n  async function PostCSVtoAPI() {\n    setOpen('open'); // const csrf = this.getCookie('csrftoken');\n\n    const response = await fetch('http://127.0.0.1:8000/upload/', {\n      method: \"POST\",\n      //headers: {'Content-Type': 'multipart/form-data'},\n      body: JSON.stringify({\n        \"data\": csvdata,\n        \"filename\": filename\n      })\n    }).then(response => response.json()).catch(error => {\n      setValue(\"maybe symptoms are not matching, Please follow the SAMPLE format\");\n      setOpen(\"close\");\n    });\n    var obj = JSON.parse(response);\n    setResult(\"enabled\");\n    setValue('ok');\n    setOpen(\"close\");\n  }\n\n  async function downloadResult() {\n    fetch('http://127.0.0.1:8000/result/').then(response => {\n      response.blob().then(blob => {\n        let url = window.URL.createObjectURL(blob);\n        let a = document.createElement('a');\n        a.href = url;\n      });\n      window.location.href = response.url;\n    });\n    setResult(\"disabled\");\n  }\n\n  ;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    className: classes.head,\n    flexWrap: \"wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, value === \"ok\" ? /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: \"blue\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 40\n    }\n  }, \"click on RESULT button \") : /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 25\n    }\n  }, value), /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    className: classes.head,\n    flexWrap: \"wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CSVReader, {\n    cssClass: \"react-csv-input\",\n    label: \"Upload file :\",\n    onFileLoaded: handleForce,\n    parserOptions: papaparseOptions,\n    inputStyle: {\n      opacity: 1,\n      width: '170px',\n      color: 'blue'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }), open === \"open\" ? /*#__PURE__*/React.createElement(CircularIndeterminate, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 43\n    }\n  }) : result === \"enabled\" ? /*#__PURE__*/React.createElement(IconLabelButtons, {\n    func: downloadResult,\n    disabled: result,\n    label: \"Result\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 91\n    }\n  }) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 168\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: PostCSVtoAPI,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 21\n    }\n  }, \"SUBMIT\"))));\n}\n\nexport default Upload;","map":{"version":3,"sources":["D:/python/virtusa_frontend/src/upload.js"],"names":["React","useState","IconLabelButtons","CSVReader","Box","createStyles","makeStyles","Button","CircularIndeterminate","useStyles","theme","head","border","min","backgroundColor","display","alignItems","justifyContent","marginLeft","shadowBlur","marginTop","marginBottom","marginRight","borderRadius","padding","Upload","classes","result","setResult","value","setValue","csvdata","setCSV","filename","setFile","open","setOpen","handleForce","data","fileInfo","papaparseOptions","header","dynamicTyping","skipEmptyLines","transformHeader","toLowerCase","replace","PostCSVtoAPI","response","fetch","method","body","JSON","stringify","then","json","catch","error","obj","parse","downloadResult","blob","url","window","URL","createObjectURL","a","document","createElement","href","location","color","opacity","width"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport IconLabelButtons from \"./uploadicon\";\r\nimport CSVReader from \"react-csv-reader\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport {createStyles, makeStyles} from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CircularIndeterminate from \"./circularprogressive\";\r\n\r\n\r\nconst useStyles = makeStyles((theme) => createStyles({\r\n    head: {\r\n        border: \"2px solid blue\",\r\n        min: \"10ch\",\r\n        backgroundColor: \"#ffffff\",\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        marginLeft: \"20%\",\r\n        shadowBlur: \"#2224FF\",\r\n        marginTop: \"10%\",\r\n        marginBottom: \"5%\",\r\n        marginRight: \"20%\",\r\n        borderRadius: 20,\r\n        padding: 30,\r\n    }\r\n\r\n}));\r\n\r\nfunction Upload() {\r\n    const classes = useStyles();\r\n    const [result, setResult] = useState(\"enabled\");\r\n    const [value, setValue] = useState('Upload or drag and drop csv file here');\r\n    const [csvdata, setCSV] = useState('');\r\n    const [filename, setFile] = useState('');\r\n    const [open, setOpen] = React.useState(\"close\");\r\n    const handleForce = (data, fileInfo) => (setCSV(data), setFile(fileInfo));\r\n\r\n    const papaparseOptions = {\r\n        header: true,\r\n        dynamicTyping: true,\r\n        skipEmptyLines: true,\r\n        transformHeader: header => header.toLowerCase().replace(/\\W/g, \"_\")\r\n    };\r\n\r\n    async function PostCSVtoAPI() {\r\n        setOpen('open');\r\n        // const csrf = this.getCookie('csrftoken');\r\n        const response = await fetch('http://127.0.0.1:8000/upload/', {\r\n            method: \"POST\",\r\n            //headers: {'Content-Type': 'multipart/form-data'},\r\n            body: JSON.stringify({\r\n                \"data\": csvdata,\r\n                \"filename\": filename\r\n            })\r\n        })\r\n            .then((response) => response.json())\r\n            .catch((error) => {\r\n                setValue(\"maybe symptoms are not matching, Please follow the SAMPLE format\");\r\n                setOpen(\"close\");\r\n            });\r\n        var obj = JSON.parse(response);\r\n        setResult(\"enabled\");\r\n        setValue('ok');\r\n        setOpen(\"close\");\r\n    }\r\n\r\n    async function downloadResult() {\r\n\r\n        fetch('http://127.0.0.1:8000/result/')\r\n            .then(response => {\r\n                response.blob().then(blob => {\r\n                    let url = window.URL.createObjectURL(blob);\r\n                    let a = document.createElement('a');\r\n                    a.href = url;\r\n                });\r\n                window.location.href = response.url;\r\n            });\r\n        setResult(\"disabled\")\r\n    };\r\n\r\n\r\n    return (\r\n        <div>\r\n            <Box display=\"flex\" className={classes.head} flexWrap=\"wrap\">\r\n                {\r\n                    (value === \"ok\") ? <p style={{color: \"blue\"}}>click on RESULT button </p> :\r\n                        <p style={{color: \"red\"}}>{value}</p>\r\n                }\r\n                <Box display=\"flex\" className={classes.head} flexWrap=\"wrap\">\r\n                    <CSVReader\r\n                        cssClass=\"react-csv-input\"\r\n                        label=\"Upload file :\"\r\n                        onFileLoaded={handleForce}\r\n                        parserOptions={papaparseOptions}\r\n                        inputStyle={{opacity: 1, width: '170px', color: 'blue'}}\r\n                    />\r\n                    {\r\n                        (open === \"open\")?<CircularIndeterminate/>:(result === \"enabled\")?<IconLabelButtons func={downloadResult} disabled={result} label={\"Result\"}/>:<p></p>\r\n                    }\r\n                    <Button variant=\"contained\" color=\"primary\" onClick={PostCSVtoAPI}>SUBMIT</Button>\r\n\r\n                </Box>\r\n            </Box>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Upload;"]},"metadata":{},"sourceType":"module"}